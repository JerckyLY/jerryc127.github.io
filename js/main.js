$((function(){const e=void 0!==GLOBAL_CONFIG.Snackbar,t=($("#page-header").width(),$("#search_button").outerWidth()),i=$("#blog_name").width();for(var a=0,o=0;o<$("#page-header .menus_item").length;o++)a+=$("#page-header .menus_item").eq(o).outerWidth();function s(){$("#page-header .toggle-menu").addClass("is_visible"),$("#page-header .menus,.search span").addClass("is_invisible")}function n(e){var o;"1"==e?o=i+t+a>$("#page-header").width()-300:"2"==e?o=i+t+a>$("#page-header").width():"3"==e&&(o=i+t+a>$("#page-header").width()),o?s():($("#page-header .toggle-menu").removeClass("is_visible"),$("#page-header .menus,.search span").removeClass("is_invisible"))}function d(){$("#page-header").removeClass("open-sidebar"),$("body").animate({paddingLeft:0},200),$("#sidebar").animate({},(function(){$("#sidebar").css("transform","translateX(0px)")})),$("#toggle-sidebar").animate({},(function(){$("#toggle-sidebar").css({transform:"rotateZ(0deg)",color:"#1F2D3D",opacity:"1"})}))}function r(){$("#page-header").addClass("open-sidebar"),$("body").animate({paddingLeft:300},200),$("#sidebar").animate({},(function(){$("#sidebar").css("transform","translateX(300px)")})),$("#toggle-sidebar").animate({},(function(){$("#toggle-sidebar").css({transform:"rotateZ(180deg)",color:"#99a9bf",opacity:"1"})}))}if($("#page-header").height()>45&&s(),$(window).bind("resize",(function(){window.innerWidth>768?n(3):s()})),$("#page-header").css({opacity:"1",animation:"headerNoOpacity .7s"}),$("#sidebar").hasClass("auto_open")?$(".sidebar-toc__content").children().length>0?($("#toggle-sidebar").addClass("on"),$(".layout_post").animate({},(function(){setTimeout((function(){$("#toggle-sidebar").addClass("on"),r()}),300),n(1)}))):$("#toggle-sidebar").css("display","none"):$("#toggle-sidebar").css("opacity","1"),$("#toggle-sidebar").on("click",(function(){if(!isMobile()&&$("#sidebar").is(":visible")){var e=$(this).hasClass("on");e?$(this).removeClass("on"):$(this).addClass("on"),e?(d(),setTimeout((function(){n(2)}),300)):(n(1),r())}})),$(".scroll-down").on("click",(function(){scrollTo("#content-outer")})),$("#bookmark-it").on("click",(function(){if(window.sidebar&&window.sidebar.addPanel)window.sidebar.addPanel(document.title,window.location.href,"");else if(window.external&&"AddFavorite"in window.external)window.external.AddFavorite(location.href,document.title);else{if(window.opera&&window.print)return this.title=document.title,!0;if(e){var t=GLOBAL_CONFIG.Snackbar.bookmark.message_prev+" "+(-1!=navigator.userAgent.toLowerCase().indexOf("mac")?"Command/Cmd":"CTRL")+"+ D "+GLOBAL_CONFIG.Snackbar.bookmark.message_next+".";snackbarShow(t)}else alert(GLOBAL_CONFIG.bookmark.message_prev+" "+(-1!=navigator.userAgent.toLowerCase().indexOf("mac")?"Command/Cmd":"CTRL")+"+ D "+GLOBAL_CONFIG.bookmark.message_next+".")}})),$("figure.highlight").wrap('<div class="code-area-wrap"></div>'),"true"==GLOBAL_CONFIG.highlight_copy){var c=$('<i class="fa fa-clipboard" aria-hidden="true"></i>'),l=$('<div class="copy-notice"></div>');$(".code-area-wrap").prepend(c),$(".code-area-wrap").prepend(l),$(".code-area-wrap .fa-clipboard").on("click",(function(){var t=window.getSelection(),i=document.createRange();i.selectNodeContents($(this).siblings("figure").find(".code pre")[0]),t.removeAllRanges(),t.addRange(i);t.toString();!function(t,i){if(document.queryCommandSupported&&document.queryCommandSupported("copy"))try{document.execCommand("copy"),e?snackbarShow(GLOBAL_CONFIG.copy.success):$(i).prev(".copy-notice").text(GLOBAL_CONFIG.copy.success).animate({opacity:1,right:30},450,(function(){setTimeout((function(){$(i).prev(".copy-notice").animate({opacity:0,right:0},650)}),400)}))}catch(t){if(!e)return $(i).prev(".copy-notice").text(GLOBAL_CONFIG.copy.error).animate({opacity:1,right:30},650,(function(){setTimeout((function(){$(i).prev(".copy-notice").animate({opacity:0,right:0},650)}),400)})),!1;snackbarShow(GLOBAL_CONFIG.copy.success)}else e?snackbarShow(GLOBAL_CONFIG.copy.noSupport):$(i).prev(".copy-notice").text(GLOBAL_CONFIG.copy.noSupport)}(0,this),t.removeAllRanges()}))}if("true"==GLOBAL_CONFIG.highlight_lang){var h,g,u=$('<div class="code_lang"></div>');$("figure").before(u),$("figure").each((function(){"js"==(h=g=$(this).attr("class").split(" ")[1])&&(g="javascript"),"md"==h&&(g="markdown"),"plain"==h&&(g="code"),"py"==h&&(g="python"),$(this).siblings(".code_lang").text(g)}))}if("true"==GLOBAL_CONFIG.highlight_shrink)var m=$('<i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i>');else m=$('<i class="fa fa-angle-down code-expand" aria-hidden="true"></i>');if($(".code-area-wrap").prepend(m),$(".code-area-wrap .code-expand").on("click",(function(){$(this).hasClass("code-closed")?($(this).siblings("figure").find("figcaption").show(),$(this).siblings("figure").find("table").show(),$(this).removeClass("code-closed")):($(this).siblings("figure").find("figcaption").hide(),$(this).siblings("figure").find("table").hide(),$(this).addClass("code-closed"))})),"false"==GLOBAL_CONFIG.medium_zoom){0===(C=$("#post-content img").not(".no-fancybox")).length&&(C=$(".justified-gallery img").not(".no-fancybox"));for(o=0;o<C.length;o++){var f=C[o].src?C[o].src:C.eq(o).attr("data-src"),p=$('<a href="'+f+'" data-fancybox="group" data-caption="'+C[o].alt+'" class="fancybox"></a>'),b=$(C[o]).wrap(p),v=C[o].alt;v&&b.after('<div class="img-alt">'+v+"</div>")}$().fancybox({selector:"[data-fancybox]",loop:!0,transitionEffect:"slide",protect:!0,buttons:["slideShow","fullScreen","thumbs","close"]})}else{var C;if((C=$(".justified-gallery img")).length)for(o=0;o<C.length;o++)p=$("<div></div>"),b=$(C[o]).wrap(p);const e=mediumZoom(document.querySelectorAll("#post img,.justified-gallery img"));e.on("open",t=>{let i="dark"==$(document.documentElement).attr("data-theme")?"#2d3032":"#fff";e.update({background:i})})}function w(){$(".toggle-menu").hasClass("open")&&($(".toggle-menu").removeClass("open").addClass("close"),$("body").removeClass("open-mobile-menus"),$("#menu_mask").fadeOut())}function y(){$("#mobile-toc-button").hasClass("open")&&($("#mobile-toc-button").removeClass("open").addClass("close"),$("body").removeClass("open-mobile-toc"),$("#menu_mask").fadeOut())}$(".toggle-menu").on("click",(function(){$(".toggle-menu").hasClass("close")&&($(".toggle-menu").removeClass("close").addClass("open"),$("body").addClass("open-mobile-menus"),$("#menu_mask").fadeIn(),$("#toggle-sidebar").hasClass("on")&&d())})),$("#mobile-toc-button").on("click",(function(){$("#mobile-toc-button").hasClass("close")&&($("#mobile-toc-button").removeClass("close").addClass("open"),$("body").addClass("open-mobile-toc"),$("#menu_mask").fadeIn())})),$("#menu_mask").on("click touchstart",(function(e){w(),y(),$("#toggle-sidebar").hasClass("on")&&setTimeout((function(){r()}),300)})),$(window).on("resize",(function(e){$(".toggle-menu").is(":visible")||w(),$("#mobile-toc-button").is(":visible")||y()})),$("#mobile-sidebar-toc a").on("click",(function(){y()}));var k=0;function _(){$(".recent-post-info").each((function(){var e=$(".recent-post-item").height(),t=$(this).height();$(this).css({"padding-top":(e-t)/2,"padding-bottom":(e-t)/2})}))}$(".toc-child").hide(),$(window).scroll(throttle((function(e){var t=$(this).scrollTop();isMobile()||(function(e){var t=$("#content-outer").height(),i=$(window).height(),a=t>i?t-i:$(document).height()-i,o=e/a,s=Math.round(100*o),n=s>100?100:s;$(".progress-num").text(n),$(".sidebar-toc__progress-bar").animate({width:n+"%"},100)}(t),function(e){if(0===$(".toc-link").length)return!1;var t=$("#post-content").find("h1,h2,h3,h4,h5,h6"),i="";t.each((function(){var t=$(this);e>t.offset().top-25&&(i="#"+$(this).attr("id"))})),""===i&&($(".toc-link").removeClass("active"),$(".toc-child").hide());var a=$(".toc-link.active");if(i&&a.attr("href")!==i){d=i,window.history.replaceState&&d!==window.location.hash&&window.history.replaceState(void 0,void 0,d),$(".toc-link").removeClass("active");var o=$('.toc-link[href="'+i+'"]');o.addClass("active");var s=o.parents(".toc-child"),n=s.length>0?s.last():o;!function(e){if(e.is(":visible"))return;e.fadeIn(400)}(n.closest(".toc-item").find(".toc-child")),n.closest(".toc-item").siblings(".toc-item").find(".toc-child").hide()}var d}(t),function(e){if($(".toc-link").hasClass("active")){var t=$(".active").offset().top,i=$("#sidebar").scrollTop();t>e+$(window).height()-50?$("#sidebar").scrollTop(i+100):t<e+50&&$("#sidebar").scrollTop(i-100)}}(t));var i=function(e){var t=e>k;return k=e,t}(t);t>56?(i?$("#page-header").hasClass("visible")&&$("#page-header").removeClass("visible"):!$("#page-header").hasClass("visible")&&$("#page-header").addClass("visible"),$("#page-header").addClass("fixed"),"0"===$("#rightside").css("opacity")&&$("#rightside").animate({},(function(){$(this).css({opacity:"1",transform:"translateX(-38px)"})}))):(0===t&&$("#page-header").removeClass("fixed").removeClass("visible"),$("#rightside").animate({},(function(){$("#rightside").css({opacity:"",transform:""})})))}),300)),$("#go-up").on("click",(function(){scrollTo("body")})),$(".toc-link").on("click",(function(e){var t;e.preventDefault(),t=$(this).attr("href"),scrollTo(t)})),$("#readmode").click((function(){"dark"==Cookies.get("theme")?("dark"==$(document.documentElement).attr("data-theme")?$(document.documentElement).attr("data-theme",""):$(document.documentElement).attr("data-theme","dark"),$("body").toggleClass("read-mode"),$("#to_comment").toggleClass("is_invisible")):($("body").toggleClass("read-mode"),$("#to_comment").toggleClass("is_invisible"))})),$("#font_plus").click((function(){var e=parseFloat($("body").css("font-size")),t=parseFloat($("pre").css("font-size")),i=parseFloat($("code").css("font-size"));$("body").css("font-size",e+1),$("pre").css("font-size",t+1),$("code").css("font-size",i+1)})),$("#font_minus").click((function(){var e=parseFloat($("body").css("font-size")),t=parseFloat($("pre").css("font-size")),i=parseFloat($("code").css("font-size"));$("body").css("font-size",e-1),$("pre").css("font-size",t-1),$("code").css("font-size",i-1)})),$(window).width()>768&&$(".menus_item_child").each((function(){var e=$(this).siblings("a").outerWidth(!0),t=$(this).outerWidth(!0);$(this).css("margin-left",-(t/2-e/2))})),$(".menus-expand").on("click",(function(){$(this).hasClass("menus-closed")?($(this).parents(".menus_item").find(".menus_item_child").slideDown(),$(this).removeClass("menus-closed")):($(this).parents(".menus_item").find(".menus_item_child").slideUp(),$(this).addClass("menus-closed"))})),$("#rightside_config").on("click",(function(){$("#rightside-config-hide").hasClass("rightside-in")?($("#rightside-config-hide").css("animation","rightside_out_animate .3s"),$("#rightside-config-hide").removeClass("rightside-in"),$("#rightside-config-hide").animate({},(function(){setTimeout((function(){$("#rightside-config-hide").css({animation:"",display:""})}),300)}))):($("#rightside-config-hide").addClass("rightside-in"),$("#rightside-config-hide").animate({},(function(){$("#rightside-config-hide").css("display","block")})))})),$(window).width()>768&&_(),$(window).bind("resize",(function(){$(window).width()>768&&_()}));GLOBAL_CONFIG.copy_copyright_js;var L=GLOBAL_CONFIG.copyright;function G(){$("#darkmode").removeClass("fa-moon-o").addClass("fa-sun-o")}function O(){$("#darkmode").removeClass("fa-sun-o").addClass("fa-moon-o")}L&&(document.body.oncopy=e=>{e.preventDefault();let t,i=window.getSelection(0).toString();return t=i.length>45?i+"\n\n\n"+L.languages.author+"\n"+L.languages.link+"\n"+L.languages.source+"\n"+L.languages.info:i,e.clipboardData?e.clipboardData.setData("text",t):window.clipboardData.setData("text",t)}),$(".justified-gallery").length&&($(".justified-gallery img").each((e,t)=>{let i=$(t).attr("data-src");$(t).attr("src",i)}),$(".justified-gallery > p > .fancybox,.justified-gallery > p > div").unwrap(),$("head").append('<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">'),loadScript("https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js",(function(){"function"==typeof $.fn.justifiedGallery&&$(".justified-gallery").justifiedGallery({rowHeight:220,margins:4})}))),"undefined"!=typeof autoChangeMode&&("1"!=autoChangeMode&&"2"!=autoChangeMode||("dark"==Cookies.get("theme")?G():O())),$("#darkmode").click((function(){"light"==("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(G(),activateDarkMode(),Cookies.set("theme","dark",{expires:2}),e&&snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(O(),activateLightMode(),Cookies.set("theme","light",{expires:2}),e&&snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day))}))}));